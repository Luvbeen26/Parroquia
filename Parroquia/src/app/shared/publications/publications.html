<main class="contenedor-publication"> 
    <article class="contenido">
        @if (adminOption()) {
            <div class="menu-container">
                <button class="menu-button" (click)="toggleMenu($event)">
                    <mat-icon>more_vert</mat-icon>
                </button>
                
                @if (isMenuOpen) {
                    <div class="menu-dropdown" (click)="$event.stopPropagation()">
                        <button class="menu-item edit"  [routerLink]="['/admin/publicaciones/edit-publicacion', id_publicacion()]">
                            <mat-icon>edit</mat-icon>
                            <span>Editar</span>
                        </button>
                        <button class="menu-item delete" (click)="delete()">
                            <mat-icon>delete</mat-icon>
                            <span>Eliminar</span>
                        </button>
                    </div>
                }
            </div>
        }
        <p class="fecha">{{ date() }}</p>
        <h2>{{ titulo() }}</h2>
        <p>{{ contenido() }}</p>
        
        @if (image().length > 0) {
            <div class="galeria-imagenes" [attr.data-count]="image().length">
                @for (img of image(); track img.id; let i = $index) {
                    <figure class="img-item" [attr.data-index]="i" (click)="openImage(i)">
                        <img 
                            [src]="img.ruta" 
                            [alt]="titulo()"
                            class="img_public"
                            [attr.loading]="i === 0 ? 'eager' : 'lazy'"
                            [attr.fetchpriority]="i === 0 ? 'high' : 'auto'">
                    </figure>
                }
            </div>
        }
        
        <footer>
        </footer>
    </article>
</main>

<app-modal-file
  [isOpen]="isModalOpen"
  [content]="modalContent"
  (closeModal)="closeModal()">
</app-modal-file>
